# Представление данных в S-выражениях на Python
## Требования
1. Определите формат представления данных с древовидной структурой в виде S-выражений. В качестве семантической основы рекомендуется рассмотреть форматы XML и/или JSON. Допускается использование как классических S-выражений, так и расширенных, используемых в языке Clojure.
2. Разработайте язык навигации и простых запросов для заданного формата. Должны поддерживаться: относительный или абсолютный путь к узлу дерева, путь с
условиями на свойства промежуточных узлов, путь с переменной вложенностью. В качестве семантической основы рекомендуется рассмотреть язык XPath для XML.
Реализуйте функции поиска и модификации заданного формата посредством этого языка.
3. Разработайте представление схемы (по аналогии с XML Schema). Реализуйте функции проверки документа по схеме.

## Дополнительные требования
4. Разработайте язык трансформации в HTML, как упрощенный аналог XSLT.
5. Визуализация дерева S-выражений.

---

## Workflow
1. Работаем в раздельных ветках.
2. В main сливаем через PR только уже готовые фичи.
3. По возможности документируем классы и методы

---

## Документация
1. Основные требования по формату (синтаксис, типы, ограничения): [format.md](docs/format.md)
2. Документация по API (на данный момент не полностью заполнена. Docstrings методов доступны полностью): [API.md](docs/API.md)

---

## Установка на Linux / macOS
```bash
git clone https://github.com/agrikol/data-view-in-sexp.git && cd data-view-in-sexp
```

```bash
python3 -m venv venv && source venv/bin/activate
```

```bash
pip install -r requirements.txt && pip install -e .
```

```bash
python3
```

```python
>>> from sexp_repr import loads, dumps, validate, tree
>>> tree('(book "S-Exp")')
```

## Установка на Windows
```shell
git clone https://github.com/agrikol/data-view-in-sexp.git ; cd data-view-in-sexp
```

```shell
python -m venv venv
```

```shell
venv\Scripts\activate
```

```shell
python -m pip install -r requirements.txt; python -m pip install -e .
```

```shell
python
```

```python
>>> from sexp_repr import loads, dumps, validate, tree
>>> tree('(book "S-Exp")')
```


---

## Примеры использования
Данный [Jupyter Notebook](examples/examples.ipynb) представляет собой демонстрацию реализации проекта.
На данный момент реализация проекта включает пункты 1, 3, 5 требований:
1. Документы [format.md](docs/format.md), описывающий основные правила формата, а также [API.md](docs/API.md) с описанием API;
2. Модель представления данных: Класс `Scalar` для представления скалярных величин и `Node` для представления AST-дерева;
3. Лексер и Парсер для корректного разбора AST на составляющие (классы `Lexer` и `Parser`);
4. Представление схемы, включая функции проверки документа по схеме: Класс `SchemaNode` для представления схемы, `Interpreter` для разбора и валидации схемы и класс `Validator` для проверки документа по схеме;
5. CLI-визуализацию документа в виде дерева, которая работает как с S-выражениями как в виде сырой Python-строки, так и с `Node`;
6. Предоставление пользователю API, включающее методы: `loads`, `dumps`, `validate`, `tree`. Все методы содержат `docstrings`;
7. Покрытие тестами всех основных классов и методов.